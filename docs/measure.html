<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>eyekit.measure API documentation</title>
<meta name="description" content="Functions for calculating common reading measures, such as gaze duration or
initial landing position." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%;border:1px solid #ccc}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:0.8em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/227875615/00ca2d80-f76c-11ea-807f-d81cd315b9df"/>
<meta name="twitter:site" content="@github"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:title" content="eyekit"/>
<meta name="twitter:description" content="A lightweight Python package for doing open, transparent, reproducible science on reading behavior"/>
<meta property="og:image" content="https://repository-images.githubusercontent.com/227875615/00ca2d80-f76c-11ea-807f-d81cd315b9df"/>
<meta property="og:site_name" content="GitHub"/>
<meta property="og:type" content="object"/>
<meta property="og:title" content="eyekit"/>
<meta property="og:url" content="https://github.com/jwcarr/eyekit"/>
<meta property="og:description" content="A lightweight Python package for doing open, transparent, reproducible science on reading behavior"/>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>eyekit.measure</code></h1>
</header>
<section id="section-intro">
<p>Functions for calculating common reading measures, such as gaze duration or
initial landing position.</p>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L0-L401" class="git-link">View code on GitHub</a></div>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="eyekit.measure.interest_area_report"><code class="name flex">
<span>def <span class="ident">interest_area_report</span></span>(<span>trials, measures)</span>
</code></dt>
<dd>
<div class="desc"><p>Given one or more trials and one or more measures, apply each measure to
all interest areas associated with each trial and return a Pandas
dataframe with the collated results. The <code>trials</code> argument should be a
list of dictionaries, where each dictionary contains minimally a
<code>fixations</code> key that maps to a <code><a title="eyekit.fixation.FixationSequence" href="fixation.html#eyekit.fixation.FixationSequence">FixationSequence</a></code> and an
<code>interest_areas</code> key that maps to a list of interest areas extracted from
a <code><a title="eyekit.text.TextBlock" href="text.html#eyekit.text.TextBlock">TextBlock</a></code>. Any other keys in the dictionary
(e.g., trial/subject identifiers) will be included as separate columns
in the resulting dataframe. The <code>measures</code> argument should be a list of
built-in measures from the <code><a title="eyekit.measure" href="#eyekit.measure">eyekit.measure</a></code> module or your own custom
measurement functions. For example:</p>
<pre><code>trials = [
    {
        'trial_id': 'trial1',
        'fixations': FixationSequence(...),
        'interest_areas': text_block.words()
    }
]
measures = ['total_fixation_duration', 'gaze_duration']
dataframe = eyekit.measure.interest_area_report(trials, measures)
dataframe.to_csv('path/to/output.csv') # write dateframe to CSV
</code></pre></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L37-L123" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.measure.number_of_fixations"><code class="name flex">
<span>def <span class="ident">number_of_fixations</span></span>(<span>interest_area, fixation_sequence)</span>
</code></dt>
<dd>
<div class="desc"><p>Given an interest area and fixation sequence, return the number of
fixations on that interest area. This function may also be applied to a collection of interest areas, in which case a dictionary of results is returned.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L126-L136" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.measure.initial_fixation_duration"><code class="name flex">
<span>def <span class="ident">initial_fixation_duration</span></span>(<span>interest_area, fixation_sequence)</span>
</code></dt>
<dd>
<div class="desc"><p>Given an interest area and fixation sequence, return the duration of the
initial fixation on that interest area. This function may also be applied to a collection of interest areas, in which case a dictionary of results is returned.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L139-L148" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.measure.first_of_many_duration"><code class="name flex">
<span>def <span class="ident">first_of_many_duration</span></span>(<span>interest_area, fixation_sequence)</span>
</code></dt>
<dd>
<div class="desc"><p>Given an interest area and fixation sequence, return the duration of the
initial fixation on that interest area, but only if there was more than
one fixation on the interest area (otherwise return <code>None</code>). This function may also be applied to a collection of interest areas, in which case a dictionary of results is returned.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L151-L164" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.measure.total_fixation_duration"><code class="name flex">
<span>def <span class="ident">total_fixation_duration</span></span>(<span>interest_area, fixation_sequence)</span>
</code></dt>
<dd>
<div class="desc"><p>Given an interest area and fixation sequence, return the sum duration of
all fixations on that interest area. This function may also be applied to a collection of interest areas, in which case a dictionary of results is returned.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L167-L177" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.measure.gaze_duration"><code class="name flex">
<span>def <span class="ident">gaze_duration</span></span>(<span>interest_area, fixation_sequence)</span>
</code></dt>
<dd>
<div class="desc"><p>Given an interest area and fixation sequence, return the gaze duration on
that interest area. Gaze duration is the sum duration of all fixations
inside an interest area until the area is exited for the first time. This function may also be applied to a collection of interest areas, in which case a dictionary of results is returned.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L180-L193" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.measure.go_past_duration"><code class="name flex">
<span>def <span class="ident">go_past_duration</span></span>(<span>interest_area, fixation_sequence)</span>
</code></dt>
<dd>
<div class="desc"><p>Given an interest area and fixation sequence, return the go-past time on
that interest area. Go-past time is the sum duration of all fixations from
when the interest area is first entered until when it is first exited to
the right, including any regressions to the left that occur during that
time period (and vice versa in the case of right-to-left text). This function may also be applied to a collection of interest areas, in which case a dictionary of results is returned.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L196-L215" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.measure.second_pass_duration"><code class="name flex">
<span>def <span class="ident">second_pass_duration</span></span>(<span>interest_area, fixation_sequence)</span>
</code></dt>
<dd>
<div class="desc"><p>Given an interest area and fixation sequence, return the second pass
duration on that interest area. Second pass duration is the sum duration
of all fixations inside an interest area during the second pass over that
interest area. This function may also be applied to a collection of interest areas, in which case a dictionary of results is returned.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L218-L240" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.measure.initial_landing_position"><code class="name flex">
<span>def <span class="ident">initial_landing_position</span></span>(<span>interest_area, fixation_sequence)</span>
</code></dt>
<dd>
<div class="desc"><p>Given an interest area and fixation sequence, return the initial landing
position (expressed in character positions) on that interest area.
Counting is from 1. If the interest area represents right-to-left text,
the first character is the rightmost one. Returns <code>None</code> if no fixation
landed on the interest area. This function may also be applied to a collection of interest areas, in which case a dictionary of results is returned.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L243-L257" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.measure.initial_landing_distance"><code class="name flex">
<span>def <span class="ident">initial_landing_distance</span></span>(<span>interest_area, fixation_sequence)</span>
</code></dt>
<dd>
<div class="desc"><p>Given an interest area and fixation sequence, return the initial landing
distance on that interest area. The initial landing distance is the pixel
distance between the first fixation to land in an interest area and the
left edge of that interest area (or, in the case of right-to-left text,
the right edge). Technically, the distance is measured from the text onset
without including any padding. Returns <code>None</code> if no fixation landed on the
interest area. This function may also be applied to a collection of interest areas, in which case a dictionary of results is returned.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L260-L276" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.measure.landing_distances"><code class="name flex">
<span>def <span class="ident">landing_distances</span></span>(<span>interest_area, fixation_sequence)</span>
</code></dt>
<dd>
<div class="desc"><p>Deprecated in 0.5.4. Given an interest area and fixation sequence, return
a list of landing distances on that interest area. Each landing distance
is the pixel distance between the fixation and the left edge of the
interest area(or, in the case of right-to-left text, the right edge). The
distance is measured from the text onset without including any padding.
Returns an empty list if no fixation landed on the interest area. This function may also be applied to a collection of interest areas, in which case a dictionary of results is returned.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L279-L298" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.measure.number_of_regressions_in"><code class="name flex">
<span>def <span class="ident">number_of_regressions_in</span></span>(<span>interest_area, fixation_sequence)</span>
</code></dt>
<dd>
<div class="desc"><p>Given an interest area and fixation sequence, return the number of
regressions back to that interest area after the interest area was read
for the first time. In other words, find the first fixation to exit the
interest area and then count how many times the reader returns to the
interest area from the right (or from the left in the case of
right-to-left text). This function may also be applied to a collection of interest areas, in which case a dictionary of results is returned.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L301-L332" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.measure.duration_mass"><code class="name flex">
<span>def <span class="ident">duration_mass</span></span>(<span>text_block, fixation_sequence, *, ngram_width=1, gamma=30)</span>
</code></dt>
<dd>
<div class="desc"><p>Given a <code><a title="eyekit.text.TextBlock" href="text.html#eyekit.text.TextBlock">TextBlock</a></code> and <code><a title="eyekit.fixation.FixationSequence" href="fixation.html#eyekit.fixation.FixationSequence">FixationSequence</a></code>,
distribute the durations of the fixations probabilistically across the
<code><a title="eyekit.text.TextBlock" href="text.html#eyekit.text.TextBlock">TextBlock</a></code>. Specifically, the duration of fixation <em>f</em> is
distributed over all characters <em>C</em> in its line according to the
probability that the reader is "seeing" each character (see
<code>p_characters_fixation()</code>), and this is summed over all fixations:</p>
<p><span><span class="MathJax_Preview">\sum_{f \in F} p(C|f) \cdot f_\mathrm{dur}</span><script type="math/tex; mode=display">\sum_{f \in F} p(C|f) \cdot f_\mathrm{dur}</script></span></p>
<p>For a given fixation <em>f</em>, we compute a Gaussian distribution over all
characters in the line according to:</p>
<p><span><span class="MathJax_Preview">p(c|f) \propto \mathrm{exp} \frac{ -\mathrm{ED}(f_\mathrm{pos}, c_\mathrm{pos})^2 }{2\gamma^2}</span><script type="math/tex; mode=display">p(c|f) \propto \mathrm{exp} \frac{ -\mathrm{ED}(f_\mathrm{pos}, c_\mathrm{pos})^2 }{2\gamma^2}</script></span></p>
<p>where <em>Î³</em> (<code>gamma</code>) is a free parameter controlling the rate at which
probability decays with the Euclidean distance (ED) between the position
of fixation <em>f</em> and the position of character <em>c</em>.</p>
<p>Returns a 2D Numpy array, the sum of which is equal to the total duration
of all fixations. This can be passed to <code><a title="eyekit.vis.Image.draw_heatmap" href="vis.html#eyekit.vis.Image.draw_heatmap">Image.draw_heatmap()</a></code>
for visualization. Duration mass reveals the parts of the text that
received the most attention. Optionally, this can be performed over
higher-level ngrams by setting <code>ngram_width</code> &gt; 1.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/measure.py#L335-L388" class="git-link">View code on GitHub</a></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="eyekit Home" href="index.html">
<img src="images/logo.png" alt="Eyekit logo" width='200' style='border:none'>
</a>
</header>
<br />
<form>
<input id="lunr-search" name="q" placeholder="ðŸ”Ž Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-dialog iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-dialog iframe {
width: 70vw;
height: 80vh;
}
}
.modal-dialog .tingle-modal-box {width: auto;}
.modal-dialog .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = 'search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-dialog'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<iframe src="' + url + '"></iframe>').open();
}
</script>
<br />
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Functions</h3>
<ul class="">
<li><code><a title="eyekit.measure.interest_area_report" href="#eyekit.measure.interest_area_report">interest_area_report</a></code></li>
<li><code><a title="eyekit.measure.number_of_fixations" href="#eyekit.measure.number_of_fixations">number_of_fixations</a></code></li>
<li><code><a title="eyekit.measure.initial_fixation_duration" href="#eyekit.measure.initial_fixation_duration">initial_fixation_duration</a></code></li>
<li><code><a title="eyekit.measure.first_of_many_duration" href="#eyekit.measure.first_of_many_duration">first_of_many_duration</a></code></li>
<li><code><a title="eyekit.measure.total_fixation_duration" href="#eyekit.measure.total_fixation_duration">total_fixation_duration</a></code></li>
<li><code><a title="eyekit.measure.gaze_duration" href="#eyekit.measure.gaze_duration">gaze_duration</a></code></li>
<li><code><a title="eyekit.measure.go_past_duration" href="#eyekit.measure.go_past_duration">go_past_duration</a></code></li>
<li><code><a title="eyekit.measure.second_pass_duration" href="#eyekit.measure.second_pass_duration">second_pass_duration</a></code></li>
<li><code><a title="eyekit.measure.initial_landing_position" href="#eyekit.measure.initial_landing_position">initial_landing_position</a></code></li>
<li><code><a title="eyekit.measure.initial_landing_distance" href="#eyekit.measure.initial_landing_distance">initial_landing_distance</a></code></li>
<li><code><a title="eyekit.measure.landing_distances" href="#eyekit.measure.landing_distances">landing_distances</a></code></li>
<li><code><a title="eyekit.measure.number_of_regressions_in" href="#eyekit.measure.number_of_regressions_in">number_of_regressions_in</a></code></li>
<li><code><a title="eyekit.measure.duration_mass" href="#eyekit.measure.duration_mass">duration_mass</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>