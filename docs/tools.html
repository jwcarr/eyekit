<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>eyekit.tools API documentation</title>
<meta name="description" content="Functions for performing common procedures, such as discarding out of
bounds fixations and snapping fixations to the lines of text." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%;border:1px solid #ccc}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:0.8em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/227875615/00ca2d80-f76c-11ea-807f-d81cd315b9df"/>
<meta name="twitter:site" content="@github"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:title" content="eyekit"/>
<meta name="twitter:description" content="A lightweight Python package for doing open, transparent, reproducible science on reading behavior"/>
<meta property="og:image" content="https://repository-images.githubusercontent.com/227875615/00ca2d80-f76c-11ea-807f-d81cd315b9df"/>
<meta property="og:site_name" content="GitHub"/>
<meta property="og:type" content="object"/>
<meta property="og:title" content="eyekit"/>
<meta property="og:url" content="https://github.com/jwcarr/eyekit"/>
<meta property="og:description" content="A lightweight Python package for doing open, transparent, reproducible science on reading behavior"/>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>eyekit.tools</code></h1>
</header>
<section id="section-intro">
<p>Functions for performing common procedures, such as discarding out of
bounds fixations and snapping fixations to the lines of text.</p>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/tools.py#L0-L168" class="git-link">View code on GitHub</a></div>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="eyekit.tools.discard_short_fixations"><code class="name flex">
<span>def <span class="ident">discard_short_fixations</span></span>(<span>fixation_sequence, threshold=50)</span>
</code></dt>
<dd>
<div class="desc"><p>Given a <code><a title="eyekit.fixation.FixationSequence" href="fixation.html#eyekit.fixation.FixationSequence">FixationSequence</a></code>, discard all fixations that are
shorter than some threshold value. Operates directly on the sequence and
does not return a copy. Note that this only flags fixations as discarded
and doesn't actually remove them; to remove discarded fixations, use
<code><a title="eyekit.fixation.FixationSequence.purge" href="fixation.html#eyekit.fixation.FixationSequence.purge">FixationSequence.purge()</a></code>.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/tools.py#L15-L28" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.tools.discard_out_of_bounds_fixations"><code class="name flex">
<span>def <span class="ident">discard_out_of_bounds_fixations</span></span>(<span>fixation_sequence, text_block, threshold=100)</span>
</code></dt>
<dd>
<div class="desc"><p>Given a <code><a title="eyekit.fixation.FixationSequence" href="fixation.html#eyekit.fixation.FixationSequence">FixationSequence</a></code> and <code><a title="eyekit.text.TextBlock" href="text.html#eyekit.text.TextBlock">TextBlock</a></code>,
discard all fixations that do not fall within some threshold distance of
any character in the text. Operates directly on the sequence and does not
return a copy. Note that this only flags fixations as discarded and
doesn't actually remove them; to remove discarded fixations, use
<code><a title="eyekit.fixation.FixationSequence.purge" href="fixation.html#eyekit.fixation.FixationSequence.purge">FixationSequence.purge()</a></code>.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/tools.py#L31-L54" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.tools.snap_to_lines"><code class="name flex">
<span>def <span class="ident">snap_to_lines</span></span>(<span>fixation_sequence, text_block, method='warp', **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Given a <code><a title="eyekit.fixation.FixationSequence" href="fixation.html#eyekit.fixation.FixationSequence">FixationSequence</a></code> and <code><a title="eyekit.text.TextBlock" href="text.html#eyekit.text.TextBlock">TextBlock</a></code>,
snap each fixation to the line that it most likely belongs to, eliminating
any y-axis variation or drift. Operates directly on the sequence and does
not return a copy. Several methods are available, some of which take
optional parameters or require SciPy to be installed. For a full
description and evaluation of these methods, see <a href="https://doi.org/10.3758/s13428-021-01554-0">Carr et al.
(2021)</a>. Note that in
single-line TextBlocks, the <code>method</code> parameter has no effect: all
fixations will be snapped to the one line.</p>
<ul>
<li>
<p><code>chain</code> : Chain consecutive fixations that are sufficiently close to each other, and
then assign chains to their closest text lines. Default params:
<code>x_thresh=192</code>, <code>y_thresh=32</code>.</p>
</li>
<li>
<p><code>cluster</code> : Classify fixations into <em>m</em> clusters based on their Y-values, and then
assign clusters to text lines in positional order. Requires SciPy.</p>
</li>
<li>
<p><code>merge</code> : Form a set of progressive sequences and then reduce the set to <em>m</em> by
repeatedly merging those that appear to be on the same line. Merged
sequences are then assigned to text lines in positional order. Default
params: <code>y_thresh=32</code>, <code>gradient_thresh=0.1</code>, <code>error_thresh=20</code>.</p>
</li>
<li>
<p><code>regress</code> : Find <em>m</em> regression lines that best fit the fixations and group fixations
according to best fit regression lines, and then assign groups to text
lines in positional order. Default params: <code>slope_bounds=(-0.1, 0.1)</code>,
<code>offset_bounds=(-50, 50)</code>, <code>std_bounds=(1, 20)</code>. Requires SciPy.</p>
</li>
<li>
<p><code>segment</code> : Segment fixation sequence into <em>m</em> subsequences based on <em>m</em>–1 most-likely
return sweeps, and then assign subsequences to text lines in chronological
order.</p>
</li>
<li>
<p><code>split</code> : Split fixation sequence into subsequences based on best candidate return
sweeps, and then assign subsequences to closest text lines. Requires
SciPy.</p>
</li>
<li>
<p><code>stretch</code> : Find a stretch factor and offset that results in a good alignment between
the fixations and lines of text, and then assign the transformed fixations
to the closest text lines. Default params: <code>stretch_bounds=(0.9, 1.1)</code>,
<code>offset_bounds=(-50, 50)</code>. Requires SciPy.</p>
</li>
<li>
<p><code>warp</code> : Map fixations to word centers using <a href="https://en.wikipedia.org/wiki/Dynamic_time_warping">Dynamic Time
Warping</a>. This finds a
monotonically increasing mapping between fixations and words with the
shortest overall distance, effectively resulting in <em>m</em> subsequences.
Fixations are then assigned to the lines that their mapped words belong
to, effectively assigning subsequences to text lines in chronological
order.</p>
</li>
</ul></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/tools.py#L57-L86" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.tools.align_to_screenshot"><code class="name flex">
<span>def <span class="ident">align_to_screenshot</span></span>(<span>text_block, screenshot_path, output_path=None, show_text=True, show_guide_lines=True, show_bounding_boxes=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Given a <code><a title="eyekit.text.TextBlock" href="text.html#eyekit.text.TextBlock">TextBlock</a></code> and the path to a PNG screenshot file,
produce an image showing the original screenshot overlaid with the text
block (shown in green). If no output path is provided, the output image is
written to the same directory as the screenshot file. This is useful for
establishing <code><a title="eyekit.text.TextBlock" href="text.html#eyekit.text.TextBlock">TextBlock</a></code> parameters (position, font size,
etc.) that match what participants actually saw in your experiment.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/tools.py#L98-L158" class="git-link">View code on GitHub</a></div>
</dd>
<dt id="eyekit.tools.font_size_at_72dpi"><code class="name flex">
<span>def <span class="ident">font_size_at_72dpi</span></span>(<span>font_size, at_dpi=96)</span>
</code></dt>
<dd>
<div class="desc"><p>Convert a font size at some dpi to the equivalent font size at 72dpi.
Typically, this can be used to convert a Windows-style 96dpi font size to
the equivalent size at 72dpi.</p></div>
<div class="git-link-div"><a href="https://github.com/jwcarr/eyekit/blob/master/eyekit/tools.py#L161-L169" class="git-link">View code on GitHub</a></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="eyekit Home" href="index.html">
<img src="images/logo.png" alt="Eyekit logo" width='200' style='border:none'>
</a>
</header>
<br />
<form>
<input id="lunr-search" name="q" placeholder="🔎 Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-dialog iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-dialog iframe {
width: 70vw;
height: 80vh;
}
}
.modal-dialog .tingle-modal-box {width: auto;}
.modal-dialog .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = 'search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-dialog'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<iframe src="' + url + '"></iframe>').open();
}
</script>
<br />
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Functions</h3>
<ul class="">
<li><code><a title="eyekit.tools.discard_short_fixations" href="#eyekit.tools.discard_short_fixations">discard_short_fixations</a></code></li>
<li><code><a title="eyekit.tools.discard_out_of_bounds_fixations" href="#eyekit.tools.discard_out_of_bounds_fixations">discard_out_of_bounds_fixations</a></code></li>
<li><code><a title="eyekit.tools.snap_to_lines" href="#eyekit.tools.snap_to_lines">snap_to_lines</a></code></li>
<li><code><a title="eyekit.tools.align_to_screenshot" href="#eyekit.tools.align_to_screenshot">align_to_screenshot</a></code></li>
<li><code><a title="eyekit.tools.font_size_at_72dpi" href="#eyekit.tools.font_size_at_72dpi">font_size_at_72dpi</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>